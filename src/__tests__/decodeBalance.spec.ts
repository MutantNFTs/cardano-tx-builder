import { decodeBalance } from "../decodeBalance";

describe("decodeBalance", () => {
  test("should correctly decode a balance", () => {
    const decoded = decodeBalance(
      "821a14e284acb0581c0c442180dd6163682d8e03b271caefb4944a24412bdd07adafb04ccba14a50494e41434f4c4144411909c4581c16fdd33c86af604e837ae57d79d5f0f1156406086db5f16afb3fcf51a14544474f4c441a02faf080581c29d222ce763455e3d7a09a665ce554f00ac89d2e99a1a83d267170c6a1434d494e1a02fa6239581c2d37295347d9fbd197ecfd0e4ddef32ef757083c23985049326a5411b8234e000de1404d5554414e5430313439014e000de1404d5554414e5430343131014e000de1404d5554414e5430353332014e000de1404d5554414e5430353939014e000de1404d5554414e5430363235014e000de1404d5554414e5430383832014e000de1404d5554414e5431303131014e000de1404d5554414e5431323138014e000de1404d5554414e5431323937014e000de1404d5554414e5431333833014e000de1404d5554414e5431363035014e000de1404d5554414e5431383239014e000de1404d5554414e5431383533014e000de1404d5554414e5432313730014e000de1404d5554414e5432333230014e000de1404d5554414e5432343533014e000de1404d5554414e5432383432014e000de1404d5554414e5433313634014e000de1404d5554414e5433323233014e000de1404d5554414e5433333238014e000de1404d5554414e5434333138014e000de1404d5554414e5434333731014e000de1404d5554414e5434343434014e000de1404d5554414e5434363838014e000de1404d5554414e5434393634014e000de1404d5554414e5435313939014e000de1404d5554414e5435353733014e000de1404d5554414e5435363038014e000de1404d5554414e5436323336014e000de1404d5554414e5436343238014e000de1404d5554414e5436353035014e000de1404d5554414e5437313334014e000de1404d5554414e5437343339014e000de1404d5554414e5437363830014e000de1404d5554414e543738393001581c5b2fa063c299c443dbbad0a186574abbdcbbc323318cccb8f207e224a1581a5370616365746f6b656e73466f756e646572734e46543130343501581c6194158d24d71eca5cc5601c45de123bf78d02c297e851be2608810aa1444445414414581c74b71d095053bb189ebcae39caaf00d53a178f1d1436a98f41eebb1ba15753746f6e6564417065556e69766572736974793037393601581caf2e27f580f7f08e93190a81f72462f153026d06450924726645891ba144445249501a3b9aca00581cb3ad8b975d24235a43cb2a54d58c717ed9dd11560b4deba2273ffb1da1480014df104b5749431a05f5e100581cb6408f665a71750e622a3f6430f35a1a6d6cde0d0b6c41bc027c0356a14f50726f6a656374426f6f6b776f726d02581cb6a7467ea1deb012808ef4e87b5ff371e85f7142d7b356a40d9b42a0a1581e436f726e75636f70696173205b76696120436861696e506f72742e696f5d1a004c4b40581cb7c783f6304eddbdf8f0dece4715d63cb9f453be89d97c8fba155d57a144524553491a3b9aca00581ccfee97ff8359f07a0a395a72b424bc6e030503390d864b86d4e0ecf8a1464b41495a454e1a000f4240581cd01794c4604f3c0e544c537bb1f4268c0e81f45880c00c09ebe4b4a7a1444d5953541901f4581cdbc31b04d90b37332813cb4cee3e8f79994643d899a5366797e745eea1434655441b00000033ac1e50c0581cffb1abe9fe93ee9f13874403a3d4f8addaa65fbf22d5d7f41c087d8ea1464d5554414e541a00029c69"
    );

    expect(decoded).toEqual({
      assets: {
        "0c442180dd6163682d8e03b271caefb4944a24412bdd07adafb04ccb": {
          "50494e41434f4c414441": 2500n,
        },
        "16fdd33c86af604e837ae57d79d5f0f1156406086db5f16afb3fcf51": {
          "44474f4c44": 50000000n,
        },
        "29d222ce763455e3d7a09a665ce554f00ac89d2e99a1a83d267170c6": {
          "4d494e": 49963577n,
        },
        "2d37295347d9fbd197ecfd0e4ddef32ef757083c23985049326a5411": {
          "000de1404d5554414e5430313439": 1n,
          "000de1404d5554414e5430343131": 1n,
          "000de1404d5554414e5430353332": 1n,
          "000de1404d5554414e5430353939": 1n,
          "000de1404d5554414e5430363235": 1n,
          "000de1404d5554414e5430383832": 1n,
          "000de1404d5554414e5431303131": 1n,
          "000de1404d5554414e5431323138": 1n,
          "000de1404d5554414e5431323937": 1n,
          "000de1404d5554414e5431333833": 1n,
          "000de1404d5554414e5431363035": 1n,
          "000de1404d5554414e5431383239": 1n,
          "000de1404d5554414e5431383533": 1n,
          "000de1404d5554414e5432313730": 1n,
          "000de1404d5554414e5432333230": 1n,
          "000de1404d5554414e5432343533": 1n,
          "000de1404d5554414e5432383432": 1n,
          "000de1404d5554414e5433313634": 1n,
          "000de1404d5554414e5433323233": 1n,
          "000de1404d5554414e5433333238": 1n,
          "000de1404d5554414e5434333138": 1n,
          "000de1404d5554414e5434333731": 1n,
          "000de1404d5554414e5434343434": 1n,
          "000de1404d5554414e5434363838": 1n,
          "000de1404d5554414e5434393634": 1n,
          "000de1404d5554414e5435313939": 1n,
          "000de1404d5554414e5435353733": 1n,
          "000de1404d5554414e5435363038": 1n,
          "000de1404d5554414e5436323336": 1n,
          "000de1404d5554414e5436343238": 1n,
          "000de1404d5554414e5436353035": 1n,
          "000de1404d5554414e5437313334": 1n,
          "000de1404d5554414e5437343339": 1n,
          "000de1404d5554414e5437363830": 1n,
          "000de1404d5554414e5437383930": 1n,
        },
        "5b2fa063c299c443dbbad0a186574abbdcbbc323318cccb8f207e224": {
          "5370616365746f6b656e73466f756e646572734e465431303435": 1n,
        },
        "6194158d24d71eca5cc5601c45de123bf78d02c297e851be2608810a": {
          "44454144": 20n,
        },
        "74b71d095053bb189ebcae39caaf00d53a178f1d1436a98f41eebb1b": {
          "53746f6e6564417065556e697665727369747930373936": 1n,
        },
        af2e27f580f7f08e93190a81f72462f153026d06450924726645891b: {
          "44524950": 1000000000n,
        },
        b3ad8b975d24235a43cb2a54d58c717ed9dd11560b4deba2273ffb1d: {
          "0014df104b574943": 100000000n,
        },
        b6408f665a71750e622a3f6430f35a1a6d6cde0d0b6c41bc027c0356: {
          "50726f6a656374426f6f6b776f726d": 2n,
        },
        b6a7467ea1deb012808ef4e87b5ff371e85f7142d7b356a40d9b42a0: {
          "436f726e75636f70696173205b76696120436861696e506f72742e696f5d":
            5000000n,
        },
        b7c783f6304eddbdf8f0dece4715d63cb9f453be89d97c8fba155d57: {
          "52455349": 1000000000n,
        },
        cfee97ff8359f07a0a395a72b424bc6e030503390d864b86d4e0ecf8: {
          "4b41495a454e": 1000000n,
        },
        d01794c4604f3c0e544c537bb1f4268c0e81f45880c00c09ebe4b4a7: {
          "4d595354": 500n,
        },
        dbc31b04d90b37332813cb4cee3e8f79994643d899a5366797e745ee: {
          "465544": 221931000000n,
        },
        ffb1abe9fe93ee9f13874403a3d4f8addaa65fbf22d5d7f41c087d8e: {
          "4d5554414e54": 171113n,
        },
      },
      lovelace: 350389420,
    });
  });

  test("should correctly decode a balance when ignoring assets", () => {
    const decoded = decodeBalance(
      "821a14e284acb0581c0c442180dd6163682d8e03b271caefb4944a24412bdd07adafb04ccba14a50494e41434f4c4144411909c4581c16fdd33c86af604e837ae57d79d5f0f1156406086db5f16afb3fcf51a14544474f4c441a02faf080581c29d222ce763455e3d7a09a665ce554f00ac89d2e99a1a83d267170c6a1434d494e1a02fa6239581c2d37295347d9fbd197ecfd0e4ddef32ef757083c23985049326a5411b8234e000de1404d5554414e5430313439014e000de1404d5554414e5430343131014e000de1404d5554414e5430353332014e000de1404d5554414e5430353939014e000de1404d5554414e5430363235014e000de1404d5554414e5430383832014e000de1404d5554414e5431303131014e000de1404d5554414e5431323138014e000de1404d5554414e5431323937014e000de1404d5554414e5431333833014e000de1404d5554414e5431363035014e000de1404d5554414e5431383239014e000de1404d5554414e5431383533014e000de1404d5554414e5432313730014e000de1404d5554414e5432333230014e000de1404d5554414e5432343533014e000de1404d5554414e5432383432014e000de1404d5554414e5433313634014e000de1404d5554414e5433323233014e000de1404d5554414e5433333238014e000de1404d5554414e5434333138014e000de1404d5554414e5434333731014e000de1404d5554414e5434343434014e000de1404d5554414e5434363838014e000de1404d5554414e5434393634014e000de1404d5554414e5435313939014e000de1404d5554414e5435353733014e000de1404d5554414e5435363038014e000de1404d5554414e5436323336014e000de1404d5554414e5436343238014e000de1404d5554414e5436353035014e000de1404d5554414e5437313334014e000de1404d5554414e5437343339014e000de1404d5554414e5437363830014e000de1404d5554414e543738393001581c5b2fa063c299c443dbbad0a186574abbdcbbc323318cccb8f207e224a1581a5370616365746f6b656e73466f756e646572734e46543130343501581c6194158d24d71eca5cc5601c45de123bf78d02c297e851be2608810aa1444445414414581c74b71d095053bb189ebcae39caaf00d53a178f1d1436a98f41eebb1ba15753746f6e6564417065556e69766572736974793037393601581caf2e27f580f7f08e93190a81f72462f153026d06450924726645891ba144445249501a3b9aca00581cb3ad8b975d24235a43cb2a54d58c717ed9dd11560b4deba2273ffb1da1480014df104b5749431a05f5e100581cb6408f665a71750e622a3f6430f35a1a6d6cde0d0b6c41bc027c0356a14f50726f6a656374426f6f6b776f726d02581cb6a7467ea1deb012808ef4e87b5ff371e85f7142d7b356a40d9b42a0a1581e436f726e75636f70696173205b76696120436861696e506f72742e696f5d1a004c4b40581cb7c783f6304eddbdf8f0dece4715d63cb9f453be89d97c8fba155d57a144524553491a3b9aca00581ccfee97ff8359f07a0a395a72b424bc6e030503390d864b86d4e0ecf8a1464b41495a454e1a000f4240581cd01794c4604f3c0e544c537bb1f4268c0e81f45880c00c09ebe4b4a7a1444d5953541901f4581cdbc31b04d90b37332813cb4cee3e8f79994643d899a5366797e745eea1434655441b00000033ac1e50c0581cffb1abe9fe93ee9f13874403a3d4f8addaa65fbf22d5d7f41c087d8ea1464d5554414e541a00029c69",
      { ignoreAssets: true }
    );

    expect(decoded).toEqual({
      lovelace: 350389420,
      assets: {}
    });
  });

  test("should return the correct balance when does not have assets", () => {
    const decoded = decodeBalance("1a14e284ac");

    expect(decoded).toEqual({
      lovelace: 350389420,
      assets: {},
    });
  });
});
